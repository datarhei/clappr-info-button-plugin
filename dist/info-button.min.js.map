{"version":3,"file":"info-button.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/main.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Events, Styler, UIContainerPlugin, Utils, template, $ } from '@clappr/core';\nimport pluginHtml from './public/info-button.html';\nimport pluginStyle from './public/style.scss';\nimport icon from './public/icon.svg';\nimport icon_disabled from './public/icon_disabled.svg';\n\nconst DEFAULT_INFO_ITEMS = [\n\t{ label: 'About', link: 'https://github.com/datarhei/clappr-info-button-plugin' },\n];\n\nconst DEFAULT_INFO_TITLE = 'Info';\n\nconst DEFAULT_INFO_BUTTON = {\n\ttitle: DEFAULT_INFO_TITLE\n};\n\nexport default class InfoButton extends UIContainerPlugin {\n\tconstructor(container) {\n\t\tsuper(container);\n\t\tthis.configure();\n\t}\n\n\tstatic get version() {\n\t\treturn VERSION;\n\t}\n\n\tget name() {\n\t\treturn 'info_button';\n\t}\n\n\tget template() {\n\t\treturn template(pluginHtml);\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\t'class': this.name,\n\t\t\t'data-info-button': ''\n\t\t};\n\t}\n\n\tget events() {\n\t\treturn {\n\t\t\t'click [data-info-button-select]': 'onInfoButton',\n\t\t\t'click [data-info-button-button]': 'onShowInfoButtonMenu'\n\t\t};\n\t}\n\n\tbindEvents() {\n\t\tthis.listenTo(this.container, Events.CONTAINER_OPTIONS_CHANGE, this.reload);\n\t\tthis.listenTo(this.container, Events.CONTAINER_MEDIACONTROL_SHOW, this.render);\n\t\tthis.listenTo(this.container, Events.CONTAINER_MEDIACONTROL_HIDE, this.hideInfoButtonMenu);\n\t}\n\n\treload() {\n\t\tthis.$el.remove();\n\t\tthis.configure();\n\t}\n\n\tconfigure() {\n\t\tconst cfg = this.options.infoButtonConfig || {};\n\n\t\tthis.visible = true;\n\t\tif ( 'visible' in cfg) {\n\t\t\tthis.visible = !!(cfg.visible);\n\t\t}\n\n\t\tthis.lang = this.language();\n\t\tif ( 'language' in cfg) {\n\t\t\tthis.lang = cfg.language;\n\t\t}\n\n\t\tthis.strings = {};\n\t\tif ( 'strings' in cfg) {\n\t\t\tthis.strings = cfg.strings;\n\t\t}\n\n\t\tthis.infoButton = DEFAULT_INFO_BUTTON;\n\t\tif ( 'button' in cfg) {\n\t\t\tthis.infoButton = cfg.button;\n\t\t}\n\n\t\tthis.infoTitle = DEFAULT_INFO_TITLE;\n\t\tif ( 'title' in cfg) {\n\t\t\tthis.infoTitle = cfg.title;\n\t\t}\n\n\t\tthis.infoItems = DEFAULT_INFO_ITEMS;\n\t\tif ( 'options' in cfg) {\n\t\t\tthis.infoItems = cfg.options;\n\t\t}\n\n\t\tthis.selectTranslation();\n\n\t\tfor (let i = 0; i < this.infoItems.length; i++) {\n\t\t\tthis.infoItems[i].id = 'info' + i;\n\t\t}\n\n\t\tlet style = Styler.getStyleFor(pluginStyle, { baseUrl: this.options.baseUrl });\n\n\t\tthis.$el.html(this.template({ 'visible': this.visible, 'button': this.infoButton, 'items': this.infoItems, 'title': this.getTitle() }));\n\t\tthis.$el.append(style);\n\n\t\tthis.rendered = false;\n\n\t\treturn;\n\t}\n\n\trender() {\n\t\tif (this.rendered === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rendered = true;\n\n\t\tif (this.visible === true) {\n\t\t\t$('.media-control-right-panel').append(this.$el);\n\t\t}\n\t\telse {\n\t\t\tthis.container.$el.append(this.$el);\n\t\t}\n\t}\n\n\tlanguage() {\n\t\treturn this.options.language || Utils.getBrowserLanguage();\n\t}\n\n\tselectTranslation() {\n\t\tlet t = null;\n\n\t\tif (this.lang in this.strings) {\n\t\t\tt = this.strings[this.lang];\n\t\t}\n\n\t\tif (t == null) {\n\t\t\tlet matches = this.lang.match(/^([a-z]+)-[A-Z]+$/);\n\t\t\tif (matches !== null) {\n\t\t\t\tlet lang = matches[1];\n\n\t\t\t\tif (lang in this.strings) {\n\t\t\t\t\tt = this.strings[lang];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (t == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ('options' in t) {\n\t\t\tthis.infoItems = t.options;\n\t\t}\n\n\t\tif ('title' in t) {\n\t\t\tthis.infoTitle = t.title;\n\t\t\tthis.infoButton.title = t.title;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tonInfoButton(event) {\n\t\tlet id = event.target.dataset.infoButtonSelect;\n\n\t\tfor (let i in this.infoItems) {\n\t\t\tif (this.infoItems[i].id != id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (typeof this.infoItems[i].link === 'function') {\n\t\t\t\tthis.infoItems[i].link();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.open(this.infoItems[i].link);\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.toggleContextMenu();\n\t\tevent.stopPropagation();\n\n\t\treturn false;\n\t}\n\n\tonShowInfoButtonMenu() {\n\t\tthis.toggleContextMenu();\n\t}\n\n\thideInfoButtonMenu() {\n\t\tthis.$('.info_button ul').hide();\n\t}\n\n\tshowInfoButtonMenu() {\n\t\tthis.$('.info_button ul').show();\n\t}\n\n\ttoggleContextMenu() {\n\t\tthis.$('.info_button ul').toggle();\n\t}\n\n\tbuttonElement() {\n\t\treturn this.$('.info_button button');\n\t}\n\n\tgetTitle() {\n\t\treturn this.infoTitle;\n\t}\n\n\t// PluginControl interface\n\tpluginControl() {\n\t\tlet self = this;\n\n\t\treturn {\n\t\t\ticon: function() {\n\t\t\t\tif (this.toggled()) {\n\t\t\t\t\treturn icon;\n\t\t\t\t}\n\n\t\t\t\treturn icon_disabled;\n\t\t\t},\n\t\t\tname: function() {\n\t\t\t\treturn self.infoTitle;\n\t\t\t},\n\t\t\ttoggle: function() {\n\t\t\t\tself.toggleContextMenu();\n\t\t\t\treturn this.toggled();\n\t\t\t},\n\t\t\ttoggled: function() {\n\t\t\t\tif (self.$('.info_button ul').css('display') === 'none') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t}\n}\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","DEFAULT_INFO_ITEMS","label","link","DEFAULT_INFO_TITLE","DEFAULT_INFO_BUTTON","title","container","configure","template","this","name","listenTo","Events","CONTAINER_OPTIONS_CHANGE","reload","CONTAINER_MEDIACONTROL_SHOW","render","CONTAINER_MEDIACONTROL_HIDE","hideInfoButtonMenu","$el","remove","cfg","options","infoButtonConfig","visible","lang","language","strings","infoButton","button","infoTitle","infoItems","selectTranslation","i","length","id","Styler","getStyleFor","pluginStyle","baseUrl","html","getTitle","append","rendered","$","Utils","getBrowserLanguage","t","matches","match","event","target","dataset","infoButtonSelect","window","open","toggleContextMenu","stopPropagation","hide","show","toggle","self","icon","toggled","UIContainerPlugin"],"mappings":"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"}