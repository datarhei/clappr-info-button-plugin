{"version":3,"file":"info-button.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/main.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Events, Styler, UIContainerPlugin, Utils, template, $ } from '@clappr/core';\nimport pluginHtml from './public/info-button.html';\nimport pluginStyle from './public/style.scss';\nimport icon from './public/icon.svg';\nimport icon_disabled from './public/icon_disabled.svg';\n\nconst DEFAULT_INFO_ITEMS = [\n\t{ label: 'About', link: 'https://github.com/datarhei/clappr-info-button-plugin' },\n];\n\nconst DEFAULT_INFO_TITLE = 'Info';\n\nconst DEFAULT_INFO_BUTTON = {\n\ttitle: DEFAULT_INFO_TITLE\n};\n\nexport default class InfoButton extends UIContainerPlugin {\n\tconstructor(container) {\n\t\tsuper(container);\n\t\tthis.configure();\n\t}\n\n\tstatic get version() {\n\t\treturn VERSION;\n\t}\n\n\tget name() {\n\t\treturn 'info_button';\n\t}\n\n\tget template() {\n\t\treturn template(pluginHtml);\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\t'class': this.name,\n\t\t\t'data-info-button': ''\n\t\t};\n\t}\n\n\tget events() {\n\t\treturn {\n\t\t\t'click [data-info-button-select]': 'onInfoButton',\n\t\t\t'click [data-info-button-button]': 'onShowInfoButtonMenu'\n\t\t};\n\t}\n\n\tbindEvents() {\n\t\tthis.listenTo(this.container, Events.CONTAINER_OPTIONS_CHANGE, this.reload);\n\t\tthis.listenTo(this.container, Events.CONTAINER_MEDIACONTROL_SHOW, this.render);\n\t\tthis.listenTo(this.container, Events.CONTAINER_MEDIACONTROL_HIDE, this.hideInfoButtonMenu);\n\t}\n\n\treload() {\n\t\tthis.$el.remove();\n\t\tthis.configure();\n\t}\n\n\tconfigure() {\n\t\tconst cfg = this.options.infoButtonConfig || {};\n\n\t\tthis.visible = true;\n\t\tif ( 'visible' in cfg) {\n\t\t\tthis.visible = !!(cfg.visible);\n\t\t}\n\n\t\tthis.lang = this.language();\n\t\tif ( 'language' in cfg) {\n\t\t\tthis.lang = cfg.language;\n\t\t}\n\n\t\tthis.strings = {};\n\t\tif ( 'strings' in cfg) {\n\t\t\tthis.strings = cfg.strings;\n\t\t}\n\n\t\tthis.infoButton = DEFAULT_INFO_BUTTON;\n\t\tif ( 'button' in cfg) {\n\t\t\tthis.infoButton = cfg.button;\n\t\t}\n\n\t\tthis.infoTitle = DEFAULT_INFO_TITLE;\n\t\tif ( 'title' in cfg) {\n\t\t\tthis.infoTitle = cfg.title;\n\t\t}\n\n\t\tthis.infoItems = DEFAULT_INFO_ITEMS;\n\t\tif ( 'options' in cfg) {\n\t\t\tthis.infoItems = cfg.options;\n\t\t}\n\n\t\tthis.selectTranslation();\n\n\t\tfor (let i = 0; i < this.infoItems.length; i++) {\n\t\t\tthis.infoItems[i].id = 'info' + i;\n\t\t}\n\n\t\tlet style = Styler.getStyleFor(pluginStyle, { baseUrl: this.options.baseUrl });\n\n\t\tthis.$el.html(this.template({ 'visible': this.visible, 'button': this.infoButton, 'items': this.infoItems, 'title': this.getTitle() }));\n\t\tthis.$el.append(style);\n\n\t\tthis.rendered = false;\n\n\t\treturn;\n\t}\n\n\trender() {\n\t\tif (this.rendered === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rendered = true;\n\n\t\tif (this.visible === true) {\n\t\t\t$('.media-control-right-panel').append(this.$el);\n\t\t}\n\t\telse {\n\t\t\tthis.container.$el.append(this.$el);\n\t\t}\n\t}\n\n\tlanguage() {\n\t\treturn this.options.language || Utils.getBrowserLanguage();\n\t}\n\n\tselectTranslation() {\n\t\tlet t = null;\n\n\t\tif (this.lang in this.strings) {\n\t\t\tt = this.strings[this.lang];\n\t\t}\n\n\t\tif (t == null) {\n\t\t\tlet matches = this.lang.match(/^([a-z]+)-[A-Z]+$/);\n\t\t\tif (matches !== null) {\n\t\t\t\tlet lang = matches[1];\n\n\t\t\t\tif (lang in this.strings) {\n\t\t\t\t\tt = this.strings[lang];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (t == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ('options' in t) {\n\t\t\tthis.infoItems = t.options;\n\t\t}\n\n\t\tif ('title' in t) {\n\t\t\tthis.infoTitle = t.title;\n\t\t\tthis.infoButton.title = t.title;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tonInfoButton(event) {\n\t\tlet id = event.target.dataset.infoButtonSelect;\n\n\t\tfor (let i in this.infoItems) {\n\t\t\tif (this.infoItems[i].id != id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (typeof this.infoItems[i].link === 'function') {\n\t\t\t\tthis.infoItems[i].link();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.open(this.infoItems[i].link);\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.toggleContextMenu();\n\t\tevent.stopPropagation();\n\n\t\treturn false;\n\t}\n\n\tonShowInfoButtonMenu() {\n\t\tthis.toggleContextMenu();\n\t}\n\n\thideInfoButtonMenu() {\n\t\tthis.$('.info_button ul').hide();\n\t}\n\n\tshowInfoButtonMenu() {\n\t\tthis.$('.info_button ul').show();\n\t}\n\n\ttoggleContextMenu() {\n\t\tthis.$('.info_button ul').toggle();\n\t}\n\n\tbuttonElement() {\n\t\treturn this.$('.info_button button');\n\t}\n\n\tgetTitle() {\n\t\treturn this.infoTitle;\n\t}\n\n\t// PluginControl interface\n\tpluginControl() {\n\t\tlet self = this;\n\n\t\treturn {\n\t\t\ticon: function() {\n\t\t\t\tif (this.toggled()) {\n\t\t\t\t\treturn icon;\n\t\t\t\t}\n\n\t\t\t\treturn icon_disabled;\n\t\t\t},\n\t\t\tname: function() {\n\t\t\t\treturn self.infoTitle;\n\t\t\t},\n\t\t\ttoggle: function() {\n\t\t\t\tself.toggleContextMenu();\n\t\t\t\treturn this.toggled();\n\t\t\t},\n\t\t\ttoggled: function() {\n\t\t\t\tif (self.$('.info_button ul').css('display') === 'none') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t}\n}\n"],"names":["DEFAULT_INFO_ITEMS","label","link","DEFAULT_INFO_TITLE","DEFAULT_INFO_BUTTON","title","InfoButton","container","configure","template","pluginHtml","name","listenTo","Events","CONTAINER_OPTIONS_CHANGE","reload","CONTAINER_MEDIACONTROL_SHOW","render","CONTAINER_MEDIACONTROL_HIDE","hideInfoButtonMenu","$el","remove","cfg","options","infoButtonConfig","visible","lang","language","strings","infoButton","button","infoTitle","infoItems","selectTranslation","i","length","id","style","Styler","getStyleFor","pluginStyle","baseUrl","html","getTitle","append","rendered","$","Utils","getBrowserLanguage","t","matches","match","event","target","dataset","infoButtonSelect","window","open","toggleContextMenu","stopPropagation","hide","show","toggle","self","icon","toggled","icon_disabled","css","UIContainerPlugin"],"mappings":"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"}